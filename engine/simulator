#!/usr/bin/octave -qf
% Include to path the control toolbox:

warning("off");
addpath('/usr/share/octave/packages/3.2/control-1.0.11/');
%
%JSONLAB Library for Octave/Matlab
%Reference: http://iso2mesh.sourceforge.net/cgi-bin/index.cgi?jsonlab/savejson.m
addpath('/var/www/vlab/engine/jsonlab/');

arg_list=argv();
for index=1:nargin
    temp = arg_list{index};
    if strcmp(temp,"-P")
        P=arg_list{++index}
    elseif strcmp(temp,"-Q")
        Q=arg_list{++index}
    elseif strcmp(temp,"-Pm")%measuring device
        Pm=arg_list{++index}
    elseif strcmp(temp,"-Qm")%measuring device
        Qm=arg_list{++index}
    end
end
P=str2num(P);
Q=str2num(Q);
id=rand();
sys=tf([1],[1 1 1]);
[y,t] = step(sys,1,10,500);
response = struct('y',y,'t',t,'P',P,'Q',Q,'id',id,'timestamp',time);
json = savejson('response',response);
fid = fopen('file.txt', 'w');
fdisp(fid, json);
fclose(fid);